{% extends 'base.html' %}

{% block title %}
{% if perfil.is_empresa %}
Agendamento: {{ perfil.empresa.razao_social }} 
{% else %}
Agendamento: {{ perfil.cliente.nome }}
{% endif %}
{% endblock %}

{% block content %}
    <script>
        function expandir(servico_id) {
    var moreServ = document.getElementById('mais'+servico_id);
    var textobotao = document.getElementById('expandBtn'+servico_id);
    if (moreServ.style.display === 'inline'){
        textobotao.innerHTML = 'Expandir';
        
        moreServ.style.display = 'none';
    } else {
        textobotao.innerHTML = 'Reduzir';
        moreServ.style.display = 'inline';
    }
}
    </script>
{% if servicos %}
{% if perfil.is_cliente %}
<h3 style="font-family:'Inter'">Você tem {{ servicos.count }} agendamentos aguardando confirmação </h3>
<section class="servicos-list">
    <hr>
{% for servico in servicos %}
<article id="servico">
    <div id="servico-empresa">
    <h4>{{ servico.empresa.nome_fantasia }}</h4>    
    </div>
    <div id="servico-horas">    
        <p>Serviço agendado para: {{ servico.data_agendada }} às {{ servico.hora_agendada }}</p>
        <p>Local Agendado: {{ servico.endereco_agendado }}</p>
    </div>
    <span id = 'mais{{ servico.id }}' style="display:none">
        <p>Descrição:</p> <textarea rows="7" cols="40" readonly style="resize:none;border-radius: 10px;margin-left: 2%;">{{ servico.desc }}</textarea>
        <form method="get" action="{% url 'lista_servicos' user.id %}">
            <br>
            <button style='background-color: rgb(235, 16, 16);'type="submit" value="{{servico.id}}" name="cancel">Cancelar</button>
        </form>
    </span>
    <button onClick="expandir({{ servico.id }})" id='expandBtn{{servico.id}}' style='float:right;border-radius: 10px;margin-left: 2%;'>Expandir</button>
</article>
<hr>
{% endfor %}
</section>
{% else %}
<h3 style="font-family:'Inter'">Você tem {{ servicos.count }} agendamentos aguardando sua confirmação </h3>
<section class="servicos-list">
    <hr>
{% for servico in servicos %}
<article id="servico">
    <div id="servico-empresa">
    <h4>{{ servico.cliente.nome }} {{ servico.cliente.sobrenome }}</h4>    
    </div>
    <div id="servico-horas">    
        <p>Serviço agendado para: {{ servico.data_agendada }} às {{ servico.hora_agendada }}</p>
        <p>Local Agendado: {{ servico.endereco_agendado }}</p>
    </div>
    <span id = 'mais{{ servico.id }}' style="display:none">
        <p>Descrição:</p> <textarea rows="7" cols="40" readonly style="resize:none;border-radius: 10px;margin-left: 2%;">{{ servico.desc }}</textarea>
        <form method="get" action="{% url 'lista_servicos' user.id %}">
            <br>
            <button style='background-color: rgb(214, 20, 20);'type="submit" value="{{servico.id}}" name="cancel">Cancelar</button>
            <button style='background-color: rgb(20, 214, 65);''><a>Fazer Orçamento!</a></button>

        </form>
    </span>
    <button onClick="expandir({{ servico.id }})" id='expandBtn{{servico.id}}' style='float:right;border-radius: 10px;margin-left: 2%;'>Expandir</button>
</article>
<hr>
{% endfor %}
</section>
{% endif %}
{% endif %}
{% endblock %}